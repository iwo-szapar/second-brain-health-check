<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Second Brain Health Check â€” Brain Scan</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Sora:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  /* ---- Surface / Background ---- */
  --bg: #f7f7f5;
  --bg-elevated: #ffffff;
  --card: #ffffff;
  --card-hover: #f5f5f3;

  /* ---- Borders ---- */
  --border: rgba(0,0,0,0.07);
  --border-hover: rgba(0,0,0,0.14);
  --divider: rgba(0,0,0,0.06);

  /* ---- Text ---- */
  --text: #1a1a1a;
  --text-secondary: #5a5a5e;
  --text-tertiary: #999;

  /* ---- Overlays (translucent tints for hover states, badges, etc.) ---- */
  --overlay-subtle: rgba(0,0,0,0.025);
  --overlay-medium: rgba(0,0,0,0.04);
  --overlay-strong: rgba(0,0,0,0.06);
  --overlay-hover: rgba(0,0,0,0.08);

  /* ---- Shadows ---- */
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 16px rgba(0,0,0,0.08), 0 1px 3px rgba(0,0,0,0.06);
  --shadow-lg: 0 8px 32px rgba(0,0,0,0.10), 0 2px 6px rgba(0,0,0,0.06);

  /* ---- Scrollbar ---- */
  --scrollbar-thumb: rgba(0,0,0,0.10);
  --scrollbar-hover: rgba(0,0,0,0.18);

  /* ---- Header ---- */
  --header-bg: rgba(247,247,245,0.88);

  /* ---- Narrative block ---- */
  --narrative-bg: rgba(0,0,0,0.02);
  --narrative-border: rgba(0,0,0,0.08);

  /* ---- Table ---- */
  --table-border: rgba(0,0,0,0.06);
  --table-border-strong: rgba(0,0,0,0.10);

  /* ---- Accent colors (darkened for legibility on white) ---- */
  --green: #059669;
  --green-dim: rgba(5,150,105,0.08);
  --yellow: #d97706;
  --orange: #ea580c;
  --red: #dc2626;
  --blue: #2563eb;

  /* ---- Glows (disabled / very subtle on light) ---- */
  --glow-green: none;
  --glow-score: none;

  /* ---- Overall accent card (dark card on light page) ---- */
  --overall-bg: linear-gradient(135deg, #1a1a22 0%, #2a2a34 100%);
  --overall-text: #e8e6e3;
  --overall-text-secondary: rgba(255,255,255,0.5);
  --overall-text-tertiary: rgba(255,255,255,0.6);
  --overall-border: rgba(0,0,0,0.10);
  --overall-border-hover: rgba(0,0,0,0.18);
  --overall-ring-track: rgba(255,255,255,0.1);

  /* ---- CTA dark card ---- */
  --cta-bg: linear-gradient(135deg, #1a1a22 0%, #2a2a34 100%);
  --cta-text: #e8e6e3;
  --cta-text-sub: rgba(255,255,255,0.55);
  --cta-border: rgba(0,0,0,0.10);
  --cta-btn-bg: #ffffff;
  --cta-btn-text: #1a1a1a;
  --cta-btn-hover-bg: #f0f0f0;
  --cta-secondary-text: rgba(255,255,255,0.4);
  --cta-secondary-text-hover: rgba(255,255,255,0.7);

  /* ---- Journey ---- */
  --journey-dot-border: rgba(0,0,0,0.10);
  --journey-dot-completed-bg: rgba(0,0,0,0.06);
  --journey-dot-completed-border: rgba(0,0,0,0.15);
  --journey-dot-completed-color: #1a1a1a;
  --journey-line-bg: rgba(0,0,0,0.06);
  --journey-line-completed: rgba(0,0,0,0.14);

  /* ---- Footer photo border ---- */
  --footer-photo-border: rgba(0,0,0,0.08);

  /* ---- Brain card radial ---- */
  --brain-card-radial: radial-gradient(ellipse at center, rgba(5,150,105,0.05) 0%, var(--card) 70%);

  /* ---- Layout ---- */
  --radius: 16px;
  --mono: 'JetBrains Mono', monospace;
  --sans: 'Sora', sans-serif;

  /* ---- Fix remedy ---- */
  --fix-remedy-bg: rgba(37,99,235,0.05);
  --fix-remedy-border: rgba(37,99,235,0.20);

  /* ---- Dimension badge backgrounds ---- */
  --badge-setup-bg: rgba(37,99,235,0.08);
  --badge-usage-bg: rgba(5,150,105,0.08);
  --badge-fluency-bg: rgba(168,85,247,0.08);
  --badge-fluency-color: #7c3aed;

  /* ---- Header h1 gradient ---- */
  --h1-gradient: linear-gradient(135deg, #1a1a1a 0%, #666 100%);

  /* ---- Brain SVG outline ---- */
  --brain-outline-stroke: rgba(100,100,100,0.35);

  /* ---- Grain texture opacity ---- */
  --grain-opacity: 0.012;
}

/* Grain texture overlay */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  z-index: 9999;
  pointer-events: none;
  opacity: var(--grain-opacity);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
}

/* Staggered card fade-in */
@keyframes cardReveal {
  from { opacity: 0; transform: translateY(24px); }
  to { opacity: 1; transform: translateY(0); }
}

.card,
.priority-fix-card,
.cta-dark-card,
.resource-list-card {
  animation: cardReveal 0.6s cubic-bezier(0.22, 1, 0.36, 1) both;
}

.card-brain { animation-delay: 0s; }
#ringSetup { animation-delay: 0.08s; }
#ringUsage { animation-delay: 0.14s; }
#ringFluency { animation-delay: 0.20s; }
#ringOverall { animation-delay: 0.26s; }
#detailCard { animation-delay: 0.32s; }
#patternsCard { animation-delay: 0.38s; }
#journeyCard { animation-delay: 0.44s; }
#fixesCard { animation-delay: 0.50s; }
.priority-fix-card { animation-delay: 0.56s; }
.cta-dark-card { animation-delay: 0.60s; }
.resource-list-card { animation-delay: 0.64s; }

/* ========== HEADER BAR ========== */
.site-header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--header-bg);
  backdrop-filter: blur(16px) saturate(1.4);
  -webkit-backdrop-filter: blur(16px) saturate(1.4);
  border-bottom: 1px solid var(--border);
}
.site-header-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.header-left {
  display: flex;
  flex-direction: column;
  justify-content: center;
  line-height: 1.2;
}
.header-left .header-product-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text);
  letter-spacing: -0.3px;
}
.header-left .header-byline {
  font-size: 12px;
  color: var(--text-secondary);
  text-decoration: none;
  transition: opacity 0.15s ease;
}
.header-left .header-byline:hover { opacity: 0.6; }

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.site-header .version-badge {
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 500;
  color: var(--text-tertiary);
  background: var(--overlay-subtle);
  padding: 3px 10px;
  border-radius: 6px;
  letter-spacing: 0.5px;
}

/* Share button */
.share-btn-wrap {
  position: relative;
}
.share-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  color: var(--text-secondary);
  transition: border-color 0.15s ease, color 0.15s ease;
}
.share-btn:hover {
  border-color: var(--border-hover);
  color: var(--text);
}
.share-dropdown {
  display: none;
  position: absolute;
  top: 38px;
  right: 0;
  background: var(--card);
  border: 1px solid var(--border-hover);
  border-radius: 10px;
  box-shadow: var(--shadow-lg);
  z-index: 200;
  min-width: 150px;
  overflow: hidden;
}
.share-dropdown.open { display: block; }
.share-dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  font-size: 13px;
  color: var(--text);
  cursor: pointer;
  transition: background 0.1s ease;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  font-family: var(--sans);
}
.share-dropdown-item:hover { background: var(--overlay-medium); }
.share-dropdown-item + .share-dropdown-item { border-top: 1px solid var(--border); }

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 32px 24px 0;
}

/* Header */
.header {
  margin-bottom: 32px;
}
.header h1 {
  font-size: 32px;
  font-weight: 800;
  letter-spacing: -1px;
  margin-bottom: 6px;
  background: var(--h1-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.header .subtitle {
  font-size: 13px;
  color: var(--text-secondary);
  font-family: var(--mono);
  letter-spacing: 0px;
}

/* Intro / How It Works */
.intro-section {
  margin-bottom: 32px;
  animation: fadeUp 0.6s ease both;
  animation-delay: 0.15s;
}
.intro-lead {
  font-family: var(--sans);
  font-size: 20px;
  font-weight: 400;
  color: var(--text-secondary);
  line-height: 1.5;
  max-width: 640px;
  margin-bottom: 28px;
}
.intro-lead strong {
  color: var(--text);
  font-weight: 600;
}
.intro-dimensions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 24px;
}
.intro-dim {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 20px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s;
  box-shadow: var(--shadow-sm);
}
.intro-dim:hover {
  border-color: var(--border-hover);
}
.intro-dim::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--green), transparent);
  opacity: 0.5;
}
.intro-dim-number {
  font-family: var(--mono);
  font-size: 36px;
  font-weight: 700;
  color: var(--green);
  line-height: 1;
  margin-bottom: 6px;
}
.intro-dim-label {
  font-family: var(--sans);
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 4px;
}
.intro-dim-desc {
  font-family: var(--mono);
  font-size: 11px;
  color: var(--text-secondary);
  line-height: 1.4;
}
.intro-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.intro-ce-note {
  font-family: var(--sans);
  font-size: 13px;
  color: var(--text-tertiary);
  line-height: 1.5;
}
.intro-ce-note strong {
  color: var(--text-secondary);
}
.intro-link {
  font-family: var(--mono);
  font-size: 12px;
  color: var(--green);
  text-decoration: none;
  white-space: nowrap;
  opacity: 0.7;
  transition: opacity 0.2s;
}
.intro-link:hover {
  opacity: 1;
}
@media (max-width: 768px) {
  .intro-dimensions { grid-template-columns: 1fr; }
  .intro-lead { font-size: 17px; }
  .intro-footer { flex-direction: column; align-items: flex-start; }
}

/* Bento Grid */
.bento {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  grid-template-rows: auto auto auto auto auto auto;
  gap: 12px;
}

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
  position: relative;
  box-shadow: var(--shadow-sm);
}
.card::before {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: calc(var(--radius) + 1px);
  padding: 1px;
  background: linear-gradient(135deg, var(--overlay-strong) 0%, transparent 50%, var(--overlay-subtle) 100%);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
}
.card:hover::before { opacity: 1; }
.card:hover {
  border-color: var(--border-hover);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

/* Brain card */
.card-brain {
  grid-column: 1 / 3;
  grid-row: 1 / 3;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  position: relative;
  overflow: hidden;
  background: var(--brain-card-radial);
}
.card-brain .card-label {
  position: absolute;
  top: 20px;
  left: 24px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-tertiary);
  font-weight: 600;
  font-family: var(--mono);
}

/* Brain color legend */
.brain-legend {
  position: absolute;
  bottom: 16px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: center;
  gap: 16px;
  z-index: 5;
}
.brain-legend-item {
  display: flex;
  align-items: center;
  gap: 5px;
  font-family: var(--mono);
  font-size: 11px;
  color: var(--text-tertiary);
}
.brain-legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Dimension ring cards */
.card-ring {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  min-height: 180px;
}
.card-ring .ring-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-tertiary);
  font-weight: 600;
  margin-bottom: 12px;
  font-family: var(--mono);
}
.card-ring .ring-score {
  font-family: var(--mono);
  font-size: 36px;
  font-weight: 700;
  letter-spacing: -2px;
  margin-top: 12px;
  color: var(--green);
}
.card-ring .ring-grade {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 2px;
  font-family: var(--mono);
}

/* Detail card */
.card-detail {
  grid-column: 1 / 5;
  grid-row: 3 / 4;
  min-height: 120px;
  max-height: 600px;
  overflow-y: auto;
  scroll-behavior: smooth;
}
.card-detail::-webkit-scrollbar { width: 6px; }
.card-detail::-webkit-scrollbar-track { background: transparent; }
.card-detail::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 3px; }
.card-detail::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-hover); }

/* View all checks toggle */
.view-all-toggle {
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  text-decoration: none;
  cursor: pointer;
  display: inline-block;
  margin-bottom: 12px;
  transition: color 0.15s ease;
}
.view-all-toggle:hover { color: var(--green); }

/* All checks table */
.all-checks-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}
.all-checks-table th {
  text-align: left;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-tertiary);
  font-weight: 600;
  padding: 8px 6px;
  border-bottom: 2px solid var(--table-border-strong);
  font-family: var(--mono);
}
.all-checks-table th:last-child { text-align: right; }
.all-checks-table td {
  padding: 6px;
  border-bottom: 1px solid var(--table-border);
  vertical-align: top;
}
.all-checks-table td:last-child {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--text-tertiary);
  text-align: right;
  white-space: nowrap;
}
.all-checks-table .table-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
}
.all-checks-table .layer-name-cell {
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
}
.all-checks-table .check-text-cell {
  color: var(--text-secondary);
}
.all-checks-wrap {
  max-height: 500px;
  overflow-y: auto;
}
.all-checks-wrap::-webkit-scrollbar { width: 6px; }
.all-checks-wrap::-webkit-scrollbar-track { background: transparent; }
.all-checks-wrap::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 3px; }

/* Detail panel header */
.detail-header {
  display: flex;
  align-items: flex-start;
  gap: 20px;
  margin-bottom: 20px;
}
.detail-header-info { flex: 1; }
.detail-header .detail-subtitle {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 2px;
  font-family: var(--mono);
}
.detail-header .detail-title {
  font-size: 24px;
  font-weight: 800;
  letter-spacing: -0.5px;
  margin-bottom: 4px;
}
.detail-header .detail-score-big {
  font-family: var(--mono);
  font-size: 56px;
  font-weight: 700;
  letter-spacing: -3px;
  line-height: 1;
}
.dimension-badge {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  font-weight: 600;
  padding: 4px 10px;
  border-radius: 6px;
  display: inline-block;
  margin-top: 6px;
  font-family: var(--mono);
}
.dimension-badge.setup { background: var(--badge-setup-bg); color: var(--blue); }
.dimension-badge.usage { background: var(--badge-usage-bg); color: var(--green); }
.dimension-badge.fluency { background: var(--badge-fluency-bg); color: var(--badge-fluency-color); }

/* Narrative block */
.detail-narrative {
  font-size: 14px;
  color: var(--text-secondary);
  font-style: italic;
  line-height: 1.6;
  padding: 12px 16px;
  border-left: 3px solid var(--narrative-border);
  margin-bottom: 24px;
  background: var(--narrative-bg);
  border-radius: 0 8px 8px 0;
}

/* Layer section */
.layer-section {
  margin-bottom: 16px;
}
.layer-section:last-child { margin-bottom: 0; }
.layer-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}
.layer-header .layer-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}
.layer-header .layer-score-text {
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
}
.layer-bar-outer {
  height: 6px;
  background: var(--overlay-medium);
  border-radius: 3px;
  margin-bottom: 8px;
  overflow: hidden;
}
.layer-bar-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Check rows */
.check-row {
  display: flex;
  align-items: flex-start;
  padding: 5px 0;
  gap: 10px;
  font-size: 13px;
  line-height: 1.45;
}
.check-row + .check-row {
  border-top: 1px solid var(--table-border);
}
.check-status {
  flex: 0 0 10px;
  width: 10px;
  height: 10px;
  border-radius: 2px;
  margin-top: 4px;
}
.check-status.pass { background: var(--green); }
.check-status.warn { background: var(--yellow); }
.check-status.fail { background: var(--red); }
.check-text {
  flex: 1;
  color: var(--text-secondary);
}
.check-score {
  flex: 0 0 auto;
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--text-tertiary);
  text-align: right;
  white-space: nowrap;
}

.detail-empty {
  color: var(--text-tertiary);
  font-size: 14px;
  padding: 20px 0;
  text-align: center;
  font-family: var(--mono);
}

/* CE Patterns card */
.card-patterns {
  grid-column: 1 / 5;
  grid-row: 4 / 5;
}
.card-patterns .card-heading,
.card-journey .card-heading,
.card-fixes .card-heading {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--text-tertiary);
  font-weight: 600;
  margin-bottom: 16px;
  font-family: var(--mono);
}
.pattern-row {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}
.pattern-row:last-child { margin-bottom: 0; }
.pattern-name-wrap {
  flex: 0 0 260px;
  display: flex;
  flex-direction: column;
}
.pattern-name {
  font-size: 13px;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pattern-descriptor {
  font-size: 11px;
  color: var(--text-tertiary);
  font-family: var(--mono);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pattern-bar-wrap {
  flex: 1;
  height: 8px;
  background: var(--overlay-medium);
  border-radius: 4px;
  margin: 0 12px;
  overflow: hidden;
}
.pattern-bar {
  height: 100%;
  border-radius: 4px;
  transition: width 0.6s cubic-bezier(0.22, 1, 0.36, 1);
}
.pattern-pct {
  flex: 0 0 40px;
  font-family: var(--mono);
  font-size: 13px;
  font-weight: 600;
  text-align: right;
}

/* Journey card */
.card-journey {
  grid-column: 1 / 5;
  grid-row: 5 / 6;
}
.journey-stages {
  display: flex;
  flex-direction: column;
  gap: 0;
}
.journey-stage {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  position: relative;
  padding-bottom: 16px;
}
.journey-stage:last-child { padding-bottom: 0; }
.journey-stage:last-child .journey-line { display: none; }
.journey-indicator {
  flex: 0 0 28px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
}
.journey-dot {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  border: 2px solid var(--journey-dot-border);
  background: var(--card);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  position: relative;
  z-index: 1;
}
.journey-dot.completed {
  background: var(--journey-dot-completed-bg);
  border-color: var(--journey-dot-completed-border);
  color: var(--journey-dot-completed-color);
}
.journey-dot.current {
  background: var(--green);
  border-color: var(--green);
  color: #fff;
}
.journey-dot.future {
  border-color: var(--divider);
  background: var(--card);
}
.journey-line {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: calc(100% - 4px);
  background: var(--journey-line-bg);
  z-index: 0;
}
.journey-line.completed { background: var(--journey-line-completed); }
.journey-line.current { background: var(--green); }
.journey-content { flex: 1; padding-top: 1px; }
.journey-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-tertiary);
}
.journey-name.completed { color: var(--text-tertiary); }
.journey-name.current { color: var(--text); font-weight: 700; }
.journey-desc {
  font-size: 12px;
  color: var(--text-tertiary);
  margin-top: 1px;
  font-family: var(--mono);
}
.journey-desc.current { color: var(--text-secondary); }

/* Fixes card */
.card-fixes {
  grid-column: 1 / 5;
  grid-row: 6 / 7;
}
.fix-row {
  padding: 10px 12px;
  border-radius: 10px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: background 0.15s ease;
}
.fix-row:hover { background: var(--overlay-subtle); }
.fix-row:last-child { margin-bottom: 0; }
.fix-top {
  display: flex;
  align-items: center;
}
.fix-num {
  flex: 0 0 28px;
  font-family: var(--mono);
  font-size: 12px;
  color: var(--text-tertiary);
  font-weight: 600;
}
.fix-title { flex: 1; font-size: 14px; }
.fix-meta {
  display: flex;
  gap: 10px;
  align-items: center;
}
.fix-impact {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--green);
  background: var(--green-dim);
  padding: 3px 8px;
  border-radius: 6px;
}
.fix-time {
  font-family: var(--mono);
  font-size: 12px;
  color: var(--text-tertiary);
}
.fix-region-tag {
  font-size: 11px;
  color: var(--text-tertiary);
  background: var(--overlay-medium);
  padding: 3px 8px;
  border-radius: 6px;
  text-transform: capitalize;
  font-family: var(--mono);
}
.fix-remedy {
  margin: 8px 0 2px 28px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  background: var(--fix-remedy-bg);
  border-left: 3px solid var(--fix-remedy-border);
  border-radius: 0 8px 8px 0;
}

/* SVG brain styles */
.brain-svg-wrap {
  width: 100%;
  max-width: 440px;
  position: relative;
}
.brain-svg-wrap svg {
  width: 100%;
  height: auto;
}
.brain-region {
  cursor: pointer;
  transition: filter 0.3s ease, opacity 0.3s ease;
}
.brain-region:hover, .brain-region.active {
  filter: brightness(1.2) saturate(1.6);
}
.brain-region.flash {
  animation: regionFlash 0.8s ease;
}
@keyframes regionFlash {
  0% { filter: brightness(1.8) saturate(2.5); }
  100% { filter: brightness(1) saturate(1); }
}

/* Per-region staggered pulse animations */
@keyframes regionPulse0 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
@keyframes regionPulse1 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.72; }
}
@keyframes regionPulse2 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.68; }
}
@keyframes regionPulse3 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.74; }
}
@keyframes regionPulse4 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.65; }
}
@keyframes regionPulse5 {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.brain-region[data-region="frontal"] {
  animation: regionPulse0 3s ease-in-out infinite;
  animation-delay: 0s;
}
.brain-region[data-region="temporal"] {
  animation: regionPulse1 3.4s ease-in-out infinite;
  animation-delay: 0.6s;
}
.brain-region[data-region="parietal"] {
  animation: regionPulse2 2.8s ease-in-out infinite;
  animation-delay: 1.2s;
}
.brain-region[data-region="occipital"] {
  animation: regionPulse3 3.6s ease-in-out infinite;
  animation-delay: 0.3s;
}
.brain-region[data-region="cerebellum"] {
  animation: regionPulse4 4s ease-in-out infinite;
  animation-delay: 1.8s;
}
.brain-region[data-region="brainstem"] {
  animation: regionPulse5 3.2s ease-in-out infinite;
  animation-delay: 2.4s;
}

/* Neural particle animation */
@keyframes particleTravel {
  0% { offset-distance: 0%; opacity: 0; }
  10% { opacity: 0.8; }
  90% { opacity: 0.8; }
  100% { offset-distance: 100%; opacity: 0; }
}

.neural-particle {
  offset-distance: 0%;
  animation: particleTravel var(--dur, 3s) linear infinite;
  animation-delay: var(--delay, 0s);
}

/* Neural connection animations */
@keyframes neuralDash {
  to { stroke-dashoffset: -20; }
}
.neural-line {
  stroke-dasharray: 4 6;
  animation: neuralDash 2s linear infinite;
}

/* Tooltip */
.brain-tooltip {
  position: absolute;
  background: var(--bg-elevated);
  border: 1px solid var(--border-hover);
  border-radius: 10px;
  padding: 10px 14px;
  font-size: 13px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
  box-shadow: var(--shadow-lg);
  z-index: 10;
  white-space: nowrap;
}
.brain-tooltip.visible { opacity: 1; }
.brain-tooltip .tt-name { font-weight: 700; font-size: 14px; color: var(--text); }
.brain-tooltip .tt-score { font-family: var(--mono); font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

/* Ring SVG */
.ring-svg { transform: rotate(-90deg); }

/* Ring progress -- subtle on light */
.ring-progress {
  filter: none;
}

/* Overall card -- dark accent on light page */
.card-overall {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background: var(--overall-bg);
  color: var(--overall-text);
  min-height: 180px;
  border-color: var(--overall-border);
}
.card-overall:hover {
  border-color: var(--overall-border-hover);
  box-shadow: var(--shadow-md);
}
.card-overall .ring-label { color: var(--overall-text-secondary); }
.card-overall .ring-score { color: var(--overall-text); }
.card-overall .ring-grade { color: var(--overall-text-tertiary); }

/* Layer divider */
.layer-section + .layer-section {
  border-top: 1px solid var(--divider);
  padding-top: 14px;
}

/* ========== PRIORITY FIX CARD ========== */
.priority-fix {
  max-width: 1200px;
  margin: 12px auto 0;
  padding: 0 24px;
}
.priority-fix-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-left: 4px solid var(--orange);
  border-radius: var(--radius);
  padding: 20px 24px;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  box-shadow: var(--shadow-sm);
}
.priority-fix-card:hover {
  border-color: var(--border-hover);
  border-left-color: var(--orange);
  box-shadow: var(--shadow-md);
}
.priority-fix-label {
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--orange);
  margin-bottom: 8px;
}
.priority-fix-title {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}
.priority-fix-remedy {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin-top: 8px;
}

/* ========== CTA + RESOURCES ========== */
.section-spacing {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
}
.cta-resources-section {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  margin-top: 12px;
}
.cta-resources-grid {
  display: grid;
  grid-template-columns: 3fr 2fr;
  gap: 12px;
}

/* CTA card -- dark on light page for contrast */
.cta-dark-card {
  background: var(--cta-bg);
  border: 1px solid var(--cta-border);
  border-radius: var(--radius);
  padding: 40px 32px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  transition: box-shadow 0.2s ease;
}
.cta-dark-card:hover {
  box-shadow: var(--shadow-lg);
}
.cta-dark-card h2 {
  font-size: 26px;
  font-weight: 800;
  color: var(--cta-text);
  letter-spacing: -0.8px;
  margin-bottom: 10px;
  line-height: 1.2;
}
.cta-dark-card .cta-sub {
  font-size: 14px;
  color: var(--cta-text-sub);
  margin-bottom: 24px;
  line-height: 1.5;
}
.cta-btn-primary {
  display: inline-block;
  font-family: var(--mono);
  font-size: 14px;
  font-weight: 600;
  color: var(--cta-btn-text);
  background: var(--cta-btn-bg);
  padding: 12px 28px;
  border-radius: 10px;
  text-decoration: none;
  letter-spacing: -0.2px;
  transition: background 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease;
}
.cta-btn-primary:hover {
  background: var(--cta-btn-hover-bg);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}
.cta-secondary-link {
  display: inline-block;
  font-family: var(--mono);
  font-size: 13px;
  color: var(--cta-secondary-text);
  text-decoration: none;
  margin-left: 20px;
  transition: color 0.15s ease;
}
.cta-secondary-link:hover { color: var(--cta-secondary-text-hover); }

/* Resource list */
.resource-list-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  box-shadow: var(--shadow-sm);
}
.resource-list-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  text-decoration: none;
  color: var(--text);
  transition: opacity 0.15s ease;
}
.resource-list-item:hover { opacity: 0.7; }
.resource-list-item + .resource-list-item { border-top: 1px solid var(--border); }
.resource-list-icon {
  width: 32px;
  height: 32px;
  background: var(--overlay-subtle);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 16px;
  color: var(--text-secondary);
}
.resource-list-title {
  flex: 1;
  font-size: 14px;
  font-weight: 600;
  letter-spacing: -0.2px;
}
.resource-list-arrow {
  font-size: 14px;
  color: var(--text-tertiary);
}

/* ========== FOOTER ========== */
.site-footer {
  border-top: 1px solid var(--border);
  margin-top: 48px;
  padding: 24px 0;
  background: var(--bg);
}
.site-footer-inner {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
.footer-credibility {
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
}
.footer-credibility-photo {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid var(--footer-photo-border);
}
.footer-credibility-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
}
.footer-stat-badge {
  font-family: var(--mono);
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
  background: var(--overlay-subtle);
  padding: 3px 8px;
  border-radius: 6px;
}
.footer-credibility-link {
  font-family: var(--mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-decoration: none;
  transition: opacity 0.15s ease;
}
.footer-credibility-link:hover { opacity: 0.6; }
.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.footer-left {
  font-size: 13px;
  color: var(--text-tertiary);
}
.footer-links {
  display: flex;
  gap: 20px;
}
.footer-links a {
  font-size: 13px;
  color: var(--text-tertiary);
  text-decoration: none;
  transition: color 0.15s ease;
}
.footer-links a:hover { color: var(--text); }

/* ========== Print styles ========== */
@media print {
  .site-header,
  .priority-fix,
  .cta-resources-section,
  .site-footer,
  .share-btn-wrap,
  .view-all-toggle {
    display: none !important;
  }
  body { background: #fff; color: #1a1a1a; }
  body::before { display: none; }
  .card { box-shadow: none; border-color: #ddd; background: #fff; }
}

/* ========== RESPONSIVE ========== */
@media (max-width: 900px) {
  .bento {
    grid-template-columns: 1fr 1fr;
  }
  .card-brain { grid-column: 1 / 3; grid-row: 1 / 2; }
  .card-detail { grid-column: 1 / 3; }
  .card-patterns { grid-column: 1 / 3; }
  .card-journey { grid-column: 1 / 3; }
  .card-fixes { grid-column: 1 / 3; }
  .cta-resources-grid { grid-template-columns: 1fr; }
  .pattern-name-wrap { flex: 0 0 200px; }
}
@media (max-width: 600px) {
  .bento {
    grid-template-columns: 1fr;
  }
  .card-brain, .card-patterns, .card-journey, .card-fixes, .card-detail {
    grid-column: 1 / 2;
  }
  .container { padding: 20px 16px 0; }
  .section-spacing { padding: 0 16px; }
  .cta-resources-section { padding: 0 16px; }
  .priority-fix { padding: 0 16px; }
  .header h1 { font-size: 24px; }
  .pattern-name-wrap { flex: 0 0 140px; }
  .pattern-name { font-size: 12px; }
  .pattern-descriptor { font-size: 10px; }
  .fix-meta { gap: 8px; }
  .detail-header { flex-direction: column; }
  .cta-dark-card { padding: 28px 20px; }
  .cta-dark-card h2 { font-size: 20px; }
  .cta-secondary-link { display: block; margin-left: 0; margin-top: 12px; }
  .blog-card { flex-direction: column; gap: 12px; }
  .blog-meta { text-align: left; }
  .site-footer-inner { text-align: center; }
  .footer-bottom { flex-direction: column; gap: 12px; }
  .footer-credibility { justify-content: center; }
  .footer-links { flex-wrap: wrap; justify-content: center; }
}
</style>
</head>
<body>

<!-- ========== HEADER BAR (TASK 7: Restructured, TASK 8: Share button) ========== -->
<header class="site-header">
  <div class="site-header-inner">
    <div class="header-left">
      <span class="header-product-name">Second Brain Health Check</span>
      <a href="https://www.iwoszapar.com" class="header-byline">by Iwo Szapar</a>
    </div>
    <div class="header-right">
      <div class="share-btn-wrap" id="shareWrap">
        <button class="share-btn" id="shareBtn" aria-label="Share">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="5" width="10" height="9" rx="1.5"/>
            <path d="M5.5 5V3.5a2.5 2.5 0 015 0V5"/>
            <path d="M8 2V8M6 4l2-2 2 2"/>
          </svg>
        </button>
        <div class="share-dropdown" id="shareDropdown">
          <button class="share-dropdown-item" id="copyLinkBtn">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"><path d="M6 8a3 3 0 004 .5l2-2a3 3 0 00-4.24-4.24L6.5 3.5"/><path d="M8 6a3 3 0 00-4-.5l-2 2a3 3 0 004.24 4.24L7.5 10.5"/></svg>
            <span>Copy Link</span>
          </button>
          <button class="share-dropdown-item" id="savePdfBtn">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"><path d="M3 12h8M7 2v7M4.5 6.5L7 9l2.5-2.5"/></svg>
            <span>Save as PDF</span>
          </button>
        </div>
      </div>
      <span class="version-badge">v0.8.3</span>
    </div>
  </div>
</header>

<div class="container">
  <header class="header">
    <h1>Second Brain Health Check</h1>
    <div class="subtitle">Brain Scan &middot; Feb 20, 2026 &middot; 289 of 341 points</div>
  </header>

  <!-- ========== INTRO / HOW IT WORKS ========== -->
  <div class="intro-section">
    <div class="intro-lead">
      We scanned <strong>38 check layers</strong> across your AI workspace.<br>Here&rsquo;s what we found.
    </div>
    <div class="intro-dimensions">
      <div class="intro-dim">
        <div class="intro-dim-number">25</div>
        <div class="intro-dim-label">Setup Quality</div>
        <div class="intro-dim-desc">CLAUDE.md, skills, hooks, memory, config, security</div>
      </div>
      <div class="intro-dim">
        <div class="intro-dim-number">7</div>
        <div class="intro-dim-label">Usage Activity</div>
        <div class="intro-dim-desc">Session frequency, pattern growth, memory evolution</div>
      </div>
      <div class="intro-dim">
        <div class="intro-dim-number">6</div>
        <div class="intro-dim-label">AI Fluency</div>
        <div class="intro-dim-desc">Progressive disclosure, delegation, orchestration</div>
      </div>
    </div>
    <div class="intro-footer">
      <div class="intro-ce-note">
        All 38 layers map to <strong>7 Context Engineering patterns</strong> &mdash; the signal that separates a collection of files from a working system.
      </div>
      <a href="https://www.iwoszapar.com/context-engineering" class="intro-link" target="_blank">Learn Context Engineering &rarr;</a>
    </div>
  </div>

  <div class="bento">
    <!-- Brain SVG Card -->
    <div class="card card-brain" id="brainCard">
      <span class="card-label">Neural Map</span>
      <div class="brain-svg-wrap" id="brainWrap">
        <svg viewBox="0 0 500 460" xmlns="http://www.w3.org/2000/svg" id="brainSvg">
          <defs>
            <!-- Outer glow filter for entire brain -->
            <filter id="brainGlow" x="-30%" y="-30%" width="160%" height="160%">
              <feGaussianBlur in="SourceGraphic" stdDeviation="8" result="glow"/>
              <feMerge>
                <feMergeNode in="glow"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <!-- Soft boundary blur filter -->
            <filter id="softEdge" x="-5%" y="-5%" width="110%" height="110%">
              <feGaussianBlur stdDeviation="1.5"/>
            </filter>

            <!-- Drop shadow for brain outline -->
            <filter id="outlineShadow" x="-5%" y="-5%" width="115%" height="115%">
              <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="rgba(0,0,0,0.12)"/>
            </filter>

            <!-- Central fissure shadow -->
            <filter id="fissureShadow" x="-10%" y="-2%" width="120%" height="104%">
              <feGaussianBlur stdDeviation="2" result="shadow"/>
              <feMerge>
                <feMergeNode in="shadow"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <!-- Particle glow -->
            <filter id="particleGlow" x="-100%" y="-100%" width="300%" height="300%">
              <feGaussianBlur stdDeviation="2" result="blur"/>
              <feMerge>
                <feMergeNode in="blur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>

            <!-- Radial gradients per region - will be set dynamically -->
            <radialGradient id="grad-frontal" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(34,197,94,0.4)"/>
              <stop offset="100%" stop-color="rgba(34,197,94,0.08)"/>
            </radialGradient>
            <radialGradient id="grad-temporal" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(34,197,94,0.4)"/>
              <stop offset="100%" stop-color="rgba(34,197,94,0.08)"/>
            </radialGradient>
            <radialGradient id="grad-parietal" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(234,179,8,0.4)"/>
              <stop offset="100%" stop-color="rgba(234,179,8,0.08)"/>
            </radialGradient>
            <radialGradient id="grad-occipital" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(34,197,94,0.4)"/>
              <stop offset="100%" stop-color="rgba(34,197,94,0.08)"/>
            </radialGradient>
            <radialGradient id="grad-cerebellum" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(249,115,22,0.4)"/>
              <stop offset="100%" stop-color="rgba(249,115,22,0.08)"/>
            </radialGradient>
            <radialGradient id="grad-brainstem" cx="50%" cy="50%" r="60%">
              <stop offset="0%" stop-color="rgba(34,197,94,0.4)"/>
              <stop offset="100%" stop-color="rgba(34,197,94,0.08)"/>
            </radialGradient>

            <!-- Neural connection paths for animateMotion -->
            <path id="npath0" d="M 180 100 Q 215 150 250 200" fill="none"/>
            <path id="npath1" d="M 320 100 Q 285 150 250 200" fill="none"/>
            <path id="npath2" d="M 100 200 Q 175 200 250 200" fill="none"/>
            <path id="npath3" d="M 400 200 Q 325 200 250 200" fill="none"/>
            <path id="npath4" d="M 250 200 Q 250 270 250 340" fill="none"/>
            <path id="npath5" d="M 250 200 Q 215 255 180 310" fill="none"/>
            <path id="npath6" d="M 250 200 Q 285 255 320 310" fill="none"/>
            <path id="npath7" d="M 160 140 Q 130 180 100 220" fill="none"/>
            <path id="npath8" d="M 340 140 Q 370 180 400 220" fill="none"/>
            <path id="npath9" d="M 200 260 Q 225 320 210 390" fill="none"/>
            <path id="npath10" d="M 300 260 Q 275 320 290 390" fill="none"/>
          </defs>

          <g filter="url(#brainGlow)">
            <!-- Organic brain outline -->
            <path d="M 250 28
              C 190 26, 130 42, 90 80
              C 55 115, 38 165, 38 215
              C 38 265, 48 310, 72 345
              C 85 368, 100 385, 120 400
              C 145 418, 170 432, 210 440
              C 230 444, 245 445, 250 445
              C 255 445, 270 444, 290 440
              C 330 432, 355 418, 380 400
              C 400 385, 415 368, 428 345
              C 452 310, 462 265, 462 215
              C 462 165, 445 115, 410 80
              C 370 42, 310 26, 250 28 Z"
              fill="none" stroke="rgba(180,178,172,0.3)" stroke-width="1.2" filter="url(#outlineShadow)"/>

            <!-- Neural connections (animated dashed lines) -->
            <g class="neural-connections" opacity="0.18">
              <line class="neural-line" x1="180" y1="100" x2="250" y2="200" stroke="#888" stroke-width="0.8"/>
              <line class="neural-line" x1="320" y1="100" x2="250" y2="200" stroke="#888" stroke-width="0.8" style="animation-delay:-0.5s"/>
              <line class="neural-line" x1="100" y1="200" x2="250" y2="200" stroke="#888" stroke-width="0.8" style="animation-delay:-1s"/>
              <line class="neural-line" x1="400" y1="200" x2="250" y2="200" stroke="#888" stroke-width="0.8" style="animation-delay:-1.5s"/>
              <line class="neural-line" x1="250" y1="200" x2="250" y2="340" stroke="#888" stroke-width="0.8" style="animation-delay:-0.3s"/>
              <line class="neural-line" x1="250" y1="200" x2="180" y2="310" stroke="#888" stroke-width="0.8" style="animation-delay:-0.8s"/>
              <line class="neural-line" x1="250" y1="200" x2="320" y2="310" stroke="#888" stroke-width="0.8" style="animation-delay:-1.2s"/>
              <line class="neural-line" x1="160" y1="140" x2="100" y2="220" stroke="#888" stroke-width="0.8" style="animation-delay:-0.6s"/>
              <line class="neural-line" x1="340" y1="140" x2="400" y2="220" stroke="#888" stroke-width="0.8" style="animation-delay:-1.1s"/>
              <line class="neural-line" x1="200" y1="260" x2="210" y2="390" stroke="#888" stroke-width="0.8" style="animation-delay:-0.4s"/>
              <line class="neural-line" x1="300" y1="260" x2="290" y2="390" stroke="#888" stroke-width="0.8" style="animation-delay:-0.9s"/>
            </g>

            <!-- FRONTAL LOBE (top front) -->
            <path class="brain-region" data-region="frontal"
              d="M 250 38
                 C 170 38, 105 65, 85 120
                 C 75 150, 80 165, 100 170
                 L 245 170
                 L 245 38 Z"
              fill="url(#grad-frontal)" stroke="none"/>
            <path class="brain-region" data-region="frontal"
              d="M 250 38
                 C 330 38, 395 65, 415 120
                 C 425 150, 420 165, 400 170
                 L 255 170
                 L 255 38 Z"
              fill="url(#grad-frontal)" stroke="none"/>

            <!-- Central fissure with depth effect -->
            <line x1="250" y1="30" x2="250" y2="450" stroke="rgba(0,0,0,0.06)" stroke-width="4" filter="url(#fissureShadow)"/>
            <line x1="250" y1="30" x2="250" y2="450" stroke="rgba(0,0,0,0.15)" stroke-width="1.5"/>
            <line x1="251" y1="30" x2="251" y2="450" stroke="rgba(255,255,255,0.08)" stroke-width="0.5"/>

            <!-- TEMPORAL LOBES (sides) -- left -->
            <path class="brain-region" data-region="temporal"
              d="M 85 120
                 C 55 170, 42 220, 48 265
                 C 52 290, 65 310, 90 310
                 L 100 170
                 C 80 165, 75 150, 85 120 Z"
              fill="url(#grad-temporal)" stroke="none"/>
            <!-- Temporal right -->
            <path class="brain-region" data-region="temporal"
              d="M 415 120
                 C 445 170, 458 220, 452 265
                 C 448 290, 435 310, 410 310
                 L 400 170
                 C 420 165, 425 150, 415 120 Z"
              fill="url(#grad-temporal)" stroke="none"/>

            <!-- PARIETAL LOBE (top back) -->
            <path class="brain-region" data-region="parietal"
              d="M 100 170
                 L 90 310
                 C 100 312, 120 310, 150 300
                 L 200 260
                 L 245 260
                 L 245 170 Z"
              fill="url(#grad-parietal)" stroke="none"/>
            <path class="brain-region" data-region="parietal"
              d="M 400 170
                 L 410 310
                 C 400 312, 380 310, 350 300
                 L 300 260
                 L 255 260
                 L 255 170 Z"
              fill="url(#grad-parietal)" stroke="none"/>

            <!-- OCCIPITAL LOBE (back) -->
            <path class="brain-region" data-region="occipital"
              d="M 150 300
                 C 130 310, 110 318, 100 325
                 C 120 360, 160 385, 210 390
                 L 245 390
                 L 245 260
                 L 200 260 Z"
              fill="url(#grad-occipital)" stroke="none"/>
            <path class="brain-region" data-region="occipital"
              d="M 350 300
                 C 370 310, 390 318, 400 325
                 C 380 360, 340 385, 290 390
                 L 255 390
                 L 255 260
                 L 300 260 Z"
              fill="url(#grad-occipital)" stroke="none"/>

            <!-- CEREBELLUM (bottom back) -->
            <path class="brain-region" data-region="cerebellum"
              d="M 100 325
                 C 80 340, 72 365, 82 390
                 C 95 415, 130 430, 175 435
                 L 245 435
                 L 245 390
                 L 210 390
                 C 160 385, 120 360, 100 325 Z"
              fill="url(#grad-cerebellum)" stroke="none"/>
            <path class="brain-region" data-region="cerebellum"
              d="M 400 325
                 C 420 340, 428 365, 418 390
                 C 405 415, 370 430, 325 435
                 L 255 435
                 L 255 390
                 L 290 390
                 C 340 385, 380 360, 400 325 Z"
              fill="url(#grad-cerebellum)" stroke="none"/>

            <!-- BRAIN STEM (bottom center) -->
            <path class="brain-region" data-region="brainstem"
              d="M 220 435
                 C 225 445, 235 452, 250 455
                 C 265 452, 275 445, 280 435
                 L 255 435
                 L 245 435 Z"
              fill="url(#grad-brainstem)" stroke="none"/>
            <path class="brain-region" data-region="brainstem"
              d="M 175 435 L 220 435 L 245 435 L 245 455 C 230 458, 200 450, 175 435 Z"
              fill="url(#grad-brainstem)" stroke="none"/>
            <path class="brain-region" data-region="brainstem"
              d="M 325 435 L 280 435 L 255 435 L 255 455 C 270 458, 300 450, 325 435 Z"
              fill="url(#grad-brainstem)" stroke="none"/>

            <!-- Soft region boundaries -->
            <g filter="url(#softEdge)" opacity="0.12" stroke="#666" stroke-width="0.8" fill="none">
              <path d="M 100 170 L 245 170"/>
              <path d="M 400 170 L 255 170"/>
              <path d="M 150 300 L 200 260 L 245 260"/>
              <path d="M 350 300 L 300 260 L 255 260"/>
              <path d="M 100 170 L 90 310"/>
              <path d="M 400 170 L 410 310"/>
              <path d="M 100 325 C 120 360 160 385 210 390 L 245 390"/>
              <path d="M 400 325 C 380 360 340 385 290 390 L 255 390"/>
              <path d="M 175 435 L 245 435"/>
              <path d="M 325 435 L 255 435"/>
            </g>

            <!-- Sulci / gyri fold lines -->
            <g opacity="1" stroke="rgba(0,0,0,0.06)" stroke-width="1" fill="none">
              <path d="M 130 55 Q 155 75 148 105 Q 142 125 150 150"/>
              <path d="M 185 48 Q 200 70 193 100 Q 188 120 195 145"/>
              <path d="M 110 80 Q 125 100 118 130"/>
              <path d="M 220 42 Q 228 65 222 95 Q 218 115 225 140"/>
              <path d="M 370 55 Q 345 75 352 105 Q 358 125 350 150"/>
              <path d="M 315 48 Q 300 70 307 100 Q 312 120 305 145"/>
              <path d="M 390 80 Q 375 100 382 130"/>
              <path d="M 280 42 Q 272 65 278 95 Q 282 115 275 140"/>
              <path d="M 135 185 Q 155 205 148 235 Q 142 248 152 258"/>
              <path d="M 190 175 Q 205 200 198 230 Q 192 248 200 260"/>
              <path d="M 110 195 Q 120 225 108 260 Q 100 280 95 300"/>
              <path d="M 365 185 Q 345 205 352 235 Q 358 248 348 258"/>
              <path d="M 310 175 Q 295 200 302 230 Q 308 248 300 260"/>
              <path d="M 390 195 Q 380 225 392 260 Q 400 280 405 300"/>
              <path d="M 175 280 Q 195 305 188 335 Q 182 355 192 375"/>
              <path d="M 220 270 Q 232 295 225 325 Q 220 350 230 375"/>
              <path d="M 325 280 Q 305 305 312 335 Q 318 355 308 375"/>
              <path d="M 280 270 Q 268 295 275 325 Q 280 350 270 375"/>
              <path d="M 62 160 Q 58 195 55 230 Q 52 255 60 280"/>
              <path d="M 78 145 Q 72 180 68 215 Q 66 242 72 268"/>
              <path d="M 438 160 Q 442 195 445 230 Q 448 255 440 280"/>
              <path d="M 422 145 Q 428 180 432 215 Q 434 242 428 268"/>
              <path d="M 115 345 Q 135 365 155 385 Q 175 400 200 415"/>
              <path d="M 130 360 Q 150 380 175 400 Q 195 412 220 425"/>
              <path d="M 385 345 Q 365 365 345 385 Q 325 400 300 415"/>
              <path d="M 370 360 Q 350 380 325 400 Q 305 412 280 425"/>
            </g>

            <!-- Neural activity particles -->
            <g filter="url(#particleGlow)">
              <circle r="2" fill="rgba(255,255,255,0.7)">
                <animateMotion dur="2.8s" repeatCount="indefinite" begin="0s">
                  <mpath href="#npath0"/>
                </animateMotion>
              </circle>
              <circle r="1.5" fill="rgba(255,255,255,0.6)">
                <animateMotion dur="3.2s" repeatCount="indefinite" begin="0.4s">
                  <mpath href="#npath1"/>
                </animateMotion>
              </circle>
              <circle r="2" fill="rgba(255,255,255,0.65)">
                <animateMotion dur="3.5s" repeatCount="indefinite" begin="1.1s">
                  <mpath href="#npath2"/>
                </animateMotion>
              </circle>
              <circle r="1.5" fill="rgba(255,255,255,0.6)">
                <animateMotion dur="3s" repeatCount="indefinite" begin="0.7s">
                  <mpath href="#npath3"/>
                </animateMotion>
              </circle>
              <circle r="2" fill="rgba(255,255,255,0.7)">
                <animateMotion dur="3.8s" repeatCount="indefinite" begin="0.2s">
                  <mpath href="#npath4"/>
                </animateMotion>
              </circle>
              <circle r="1.5" fill="rgba(255,255,255,0.55)">
                <animateMotion dur="2.6s" repeatCount="indefinite" begin="1.5s">
                  <mpath href="#npath5"/>
                </animateMotion>
              </circle>
              <circle r="2" fill="rgba(255,255,255,0.65)">
                <animateMotion dur="3.1s" repeatCount="indefinite" begin="0.9s">
                  <mpath href="#npath6"/>
                </animateMotion>
              </circle>
              <circle r="1.5" fill="rgba(255,255,255,0.6)">
                <animateMotion dur="2.4s" repeatCount="indefinite" begin="1.8s">
                  <mpath href="#npath7"/>
                </animateMotion>
              </circle>
              <circle r="2" fill="rgba(255,255,255,0.7)">
                <animateMotion dur="3.4s" repeatCount="indefinite" begin="0.3s">
                  <mpath href="#npath8"/>
                </animateMotion>
              </circle>
              <circle r="1.5" fill="rgba(255,255,255,0.55)">
                <animateMotion dur="4s" repeatCount="indefinite" begin="2.1s">
                  <mpath href="#npath9"/>
                </animateMotion>
              </circle>
              <circle r="2" fill="rgba(255,255,255,0.6)">
                <animateMotion dur="3.6s" repeatCount="indefinite" begin="1.3s">
                  <mpath href="#npath10"/>
                </animateMotion>
              </circle>
            </g>

          </g>
        </svg>
        <div class="brain-tooltip" id="brainTooltip">
          <div class="tt-name"></div>
          <div class="tt-score"></div>
        </div>
      </div>
      <!-- TASK 1: Color legend -->
      <div class="brain-legend">
        <div class="brain-legend-item"><span class="brain-legend-dot" style="background:var(--green)"></span>Healthy</div>
        <div class="brain-legend-item"><span class="brain-legend-dot" style="background:var(--yellow)"></span>Needs work</div>
        <div class="brain-legend-item"><span class="brain-legend-dot" style="background:var(--red)"></span>Missing</div>
      </div>
    </div>

    <!-- Setup Ring -->
    <div class="card card-ring" id="ringSetup">
      <div class="ring-label">Setup</div>
      <svg class="ring-svg" width="100" height="100" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="6"/>
        <circle cx="50" cy="50" r="40" fill="none" stroke="var(--green)" stroke-width="6"
          stroke-linecap="round" stroke-dasharray="251.3" stroke-dashoffset="251.3"
          class="ring-progress" data-pct="81"/>
      </svg>
      <div class="ring-score">81</div>
      <div class="ring-grade">Grade A</div>
    </div>

    <!-- Usage Ring -->
    <div class="card card-ring" id="ringUsage">
      <div class="ring-label">Usage</div>
      <svg class="ring-svg" width="100" height="100" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="6"/>
        <circle cx="50" cy="50" r="40" fill="none" stroke="var(--green)" stroke-width="6"
          stroke-linecap="round" stroke-dasharray="251.3" stroke-dashoffset="251.3"
          class="ring-progress" data-pct="88"/>
      </svg>
      <div class="ring-score">88</div>
      <div class="ring-grade">Active</div>
    </div>

    <!-- Fluency Ring -->
    <div class="card card-ring" id="ringFluency">
      <div class="ring-label">Fluency</div>
      <svg class="ring-svg" width="100" height="100" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="6"/>
        <circle cx="50" cy="50" r="40" fill="none" stroke="var(--green)" stroke-width="6"
          stroke-linecap="round" stroke-dasharray="251.3" stroke-dashoffset="251.3"
          class="ring-progress" data-pct="100"/>
      </svg>
      <div class="ring-score">100</div>
      <div class="ring-grade">Expert</div>
    </div>

    <!-- Overall (dark card) -->
    <div class="card card-ring card-overall" id="ringOverall">
      <div class="ring-label">Overall</div>
      <svg class="ring-svg" width="100" height="100" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="none" stroke="rgba(0,0,0,0.1)" stroke-width="6"/>
        <circle cx="50" cy="50" r="40" fill="none" stroke="#08080a" stroke-width="6"
          stroke-linecap="round" stroke-dasharray="251.3" stroke-dashoffset="251.3"
          class="ring-progress" data-pct="85"/>
      </svg>
      <div class="ring-score">85</div>
      <div class="ring-grade">Production-Grade</div>
    </div>

    <!-- TASK 5: View all checks toggle -->
    <!-- Region Detail Card (full width) -->
    <div class="card card-detail" id="detailCard">
      <div id="viewAllToggleWrap">
        <a class="view-all-toggle" id="viewAllBtn" onclick="toggleAllChecks()">View all 38 checks &rarr;</a>
      </div>
      <div id="detailContent">
        <div class="detail-empty">Click a brain region to see full diagnostic detail</div>
      </div>
      <div id="allChecksContent" style="display:none;"></div>
    </div>

    <!-- CE Patterns Card (TASK 9: full width) -->
    <div class="card card-patterns" id="patternsCard">
      <div class="card-heading">Context Engineering Patterns</div>
      <div id="patternsContent"></div>
    </div>

    <!-- Journey Stage Card (TASK 9: full width below patterns) -->
    <div class="card card-journey" id="journeyCard">
      <div class="card-heading">Journey Stage</div>
      <div id="journeyContent"></div>
    </div>

    <!-- Fixes Card -->
    <div class="card card-fixes" id="fixesCard">
      <div class="card-heading">Top Fixes</div>
      <div id="fixesContent"></div>
    </div>
  </div>
</div>

<!-- TASK 2: Priority Fix Card -->
<div class="priority-fix" id="priorityFixSection"></div>

<!-- ========== TASK 4: COMBINED CTA + RESOURCES ========== -->
<div class="cta-resources-section">
  <div class="cta-resources-grid">
    <div class="cta-dark-card">
      <h2>Stop Babysitting ChatGPT.<br>Start Shipping Real Work.</h2>
      <div class="cta-sub">95+ knowledge workers now ship deliverables in 15 minutes, not hours.</div>
      <div>
        <a href="https://www.iwoszapar.com/second-brain-ai" class="cta-btn-primary">Build Your Second Brain &rarr;</a>
        <!-- TASK 3: Changed "Take the Quiz" to "Watch the Demo" with new URL -->
        <a href="https://www.iwoszapar.com/resources" class="cta-secondary-link">Watch the Demo</a>
      </div>
    </div>
    <div class="resource-list-card">
      <a href="https://www.iwoszapar.com/resources" class="resource-list-item">
        <div class="resource-list-icon">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 3h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1z"/><path d="M7 7h6M7 10h6M7 13h4"/></svg>
        </div>
        <span class="resource-list-title">Claude Code Mini Tutorial</span>
        <span class="resource-list-arrow">&rarr;</span>
      </a>
      <a href="https://www.iwoszapar.com/resources" class="resource-list-item">
        <div class="resource-list-icon">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="14" height="14" rx="2"/><path d="M3 8h14M8 8v9"/></svg>
        </div>
        <span class="resource-list-title">AI Chief of Staff Template</span>
        <span class="resource-list-arrow">&rarr;</span>
      </a>
      <a href="https://www.iwoszapar.com/resources" class="resource-list-item">
        <div class="resource-list-icon">
          <svg width="16" height="16" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 4h5l2 2h7a1 1 0 011 1v8a1 1 0 01-1 1H3a1 1 0 01-1-1V5a1 1 0 011-1z"/></svg>
        </div>
        <span class="resource-list-title">Context Engineering Directory</span>
        <span class="resource-list-arrow">&rarr;</span>
      </a>
    </div>
  </div>
</div>

<!-- ========== FOOTER (TASK 10: Credibility moved here) ========== -->
<footer class="site-footer">
  <div class="site-footer-inner">
    <div class="footer-credibility">
      <img src="assets/iwo-profile-mountains.jpg" alt="Iwo Szapar" class="footer-credibility-photo">
      <span class="footer-credibility-name">Built by Iwo Szapar</span>
      <span class="footer-stat-badge">3,000+ Companies</span>
      <span class="footer-stat-badge">25,000+ Professionals</span>
      <span class="footer-stat-badge">75 Countries</span>
      <a href="https://www.iwoszapar.com/about" class="footer-credibility-link">Learn more &rarr;</a>
    </div>
    <div class="footer-bottom">
      <div class="footer-left">&copy; 2025 Iwo Szapar &middot; Part of the Context Engineering product suite</div>
      <div class="footer-links">
        <a href="https://www.iwoszapar.com/blog">Blog</a>
        <a href="https://www.iwoszapar.com/resources">Resources</a>
        <a href="https://www.iwoszapar.com/contact">Contact</a>
        <a href="https://www.linkedin.com/in/iwoszapar/">LinkedIn</a>
        <a href="https://x.com/iwoszapar">Twitter/X</a>
      </div>
    </div>
  </div>
</footer>

<script>
const data = {
  overall: 85, grade: 'A', label: 'Production-Grade',
  raw: 289, maxRaw: 341,
  setup: { score: 81, grade: 'A' },
  usage: { score: 88, grade: 'Active' },
  fluency: { score: 100, grade: 'Expert' },

  narratives: {
    setup: "Your setup is strong. The architecture is in place \u2014 CLAUDE.md is routing, skills are configured, memory has structure. Focus on the yellow and red items below.",
    usage: "Your brain is alive. Sessions are happening, patterns are forming, memory is growing. This is where compound learning kicks in \u2014 every session makes the next one better.",
    fluency: "You are not just using AI \u2014 you are engineering context. Your skills orchestrate tools, reference knowledge, and use progressive disclosure."
  },

  patterns: [
    { name: 'Progressive Disclosure', pct: 92 },
    { name: 'Knowledge Files as RAM', pct: 87 },
    { name: 'Hooks as Guardrails', pct: 65 },
    { name: 'Three-Layer Memory', pct: 78 },
    { name: 'Compound Learning', pct: 91 },
    { name: 'Self-Correction', pct: 72 },
    { name: 'Context Surfaces', pct: 83 },
  ],

  journey: {
    current: 'production-grade',
    stages: [
      { id: 'blank', name: 'Blank Slate', desc: 'You have a repo. Not much else.' },
      { id: 'scaffolded', name: 'Scaffolded', desc: 'Structure exists. Skills are configured.' },
      { id: 'practicing', name: 'Practicing', desc: 'Daily usage. Patterns starting to form.' },
      { id: 'compounding', name: 'Compounding', desc: 'Memory grows between sessions. AI knows your context.' },
      { id: 'production-grade', name: 'Production-Grade', desc: 'Self-improving system. Hooks, reviews, compound loops.' },
    ]
  },

  brainRegions: {
    frontal: {
      name: 'Frontal Lobe',
      subtitle: 'Foundation & Planning',
      dimension: 'setup',
      score: 85,
      layers: [
        {
          name: 'CLAUDE.md Quality', score: 19, max: 20,
          checks: [
            { status: 'pass', text: 'Quick Start section found with 24 numbered rules', score: '5/5' },
            { status: 'pass', text: 'Role/context section found', score: '3/3' },
            { status: 'pass', text: '3 domain pattern(s) found: TypeScript, API, schema', score: '5/5' },
            { status: 'pass', text: 'Gotchas/pitfalls section found', score: '3/3' },
            { status: 'pass', text: 'Project structure documentation found', score: '2/2' },
            { status: 'warn', text: 'CLAUDE.md is 13,499 characters \u2014 consider splitting into linked files', score: '1/2' },
          ]
        },
        {
          name: 'Directory Structure', score: 11, max: 15,
          checks: [
            { status: 'pass', text: '6 semantic directories found: memory, content, growth, product, docs, imports', score: '5/5' },
            { status: 'pass', text: '3 index files found (index.md / _index.md / INDEX.md)', score: '5/5' },
            { status: 'warn', text: 'No folder tree found in CLAUDE.md \u2014 consider adding a directory overview', score: '1/5' },
          ]
        },
        {
          name: 'Knowledge Base', score: 9, max: 10,
          checks: [
            { status: 'pass', text: '.claude/docs/ or knowledge/ directory with domain context files', score: '5/5' },
            { status: 'pass', text: 'Knowledge files organized by topic with clear naming', score: '4/5' },
          ]
        },
        {
          name: 'Spec & Planning', score: 8, max: 10,
          checks: [
            { status: 'pass', text: 'Plans/specs directories exist with structured requirements', score: '5/5' },
            { status: 'warn', text: 'plansDirectory not set in settings \u2014 consider configuring it', score: '3/5' },
          ]
        },
      ]
    },
    temporal: {
      name: 'Temporal Lobes',
      subtitle: 'Memory & Learning',
      dimension: 'usage',
      score: 82,
      layers: [
        {
          name: 'Memory System', score: 13, max: 15,
          checks: [
            { status: 'pass', text: 'memory/ has 4 subdirectories', score: '4/4' },
            { status: 'pass', text: 'Patterns directory found for storing learned patterns', score: '3/3' },
            { status: 'warn', text: 'Found 1 style/voice/personal file with content (>100 bytes) \u2014 need 2+', score: '2/4' },
            { status: 'pass', text: '240 example/workflow markdown files found', score: '4/4' },
          ]
        },
        {
          name: 'Memory Evolution', score: 20, max: 20,
          checks: [
            { status: 'pass', text: '25/36 memory files modified after initial setup (69%)', score: '8/8' },
            { status: 'pass', text: 'MEMORY.md has 20 non-empty lines of accumulated knowledge', score: '6/6' },
            { status: 'pass', text: '36 markdown files in memory/ \u2014 healthy knowledge base', score: '6/6' },
          ]
        },
        {
          name: 'Pattern Recognition', score: 25, max: 25,
          checks: [
            { status: 'pass', text: '4 pattern candidates being tracked', score: '8/8' },
            { status: 'pass', text: '3 promoted/established patterns', score: '8/8' },
            { status: 'pass', text: '4 pattern files with substantive content', score: '5/5' },
            { status: 'pass', text: 'Pattern confidence levels show progression (patterns maturing over time)', score: '4/4' },
          ]
        },
        {
          name: 'Cross-Reference Quality', score: 15, max: 15,
          checks: [
            { status: 'pass', text: '8 knowledge directories: .claude, memory, content, growth, product, docs, imports, WhatsApp', score: '2/2' },
            { status: 'pass', text: '322/849 files contain cross-references (38%)', score: '5/5' },
            { status: 'pass', text: '2553 strong refs (explicit directives or brain-dir paths)', score: '5/5' },
            { status: 'pass', text: '322 files form a connected knowledge graph', score: '3/3' },
          ]
        },
      ]
    },
    parietal: {
      name: 'Parietal Lobe',
      subtitle: 'Skills & Processing',
      dimension: 'fluency',
      score: 90,
      layers: [
        {
          name: 'Skills Configuration', score: 18, max: 20,
          checks: [
            { status: 'pass', text: '65 skill(s) found in .claude/skills/', score: '6/6' },
            { status: 'fail', text: 'No .codex/skills/ directory \u2014 add one for Codex compatibility', score: '0/2' },
            { status: 'pass', text: '53/65 skills have YAML frontmatter (82%)', score: '4/4' },
            { status: 'pass', text: '65/65 skills have profession-relevant names (100%)', score: '4/4' },
            { status: 'pass', text: '65/65 skills have 200+ characters of content (100%)', score: '4/4' },
          ]
        },
        {
          name: 'Progressive Disclosure', score: 10, max: 10,
          checks: [
            { status: 'pass', text: '21 unique external doc references \u2014 CLAUDE.md is a well-organized routing layer', score: '10/10' },
          ]
        },
        {
          name: 'Skill Orchestration', score: 10, max: 10,
          checks: [
            { status: 'pass', text: '49/54 skills orchestrate multiple tool types (7 use delegation, 19 use MCP)', score: '10/10' },
          ]
        },
        {
          name: 'Context-Aware Skills', score: 10, max: 10,
          checks: [
            { status: 'pass', text: '38/54 skills (70%) reference knowledge directories (302 total refs)', score: '10/10' },
          ]
        },
      ]
    },
    occipital: {
      name: 'Occipital Lobe',
      subtitle: 'Observation & Monitoring',
      dimension: 'usage',
      score: 78,
      layers: [
        {
          name: 'Session Activity', score: 22, max: 25,
          checks: [
            { status: 'pass', text: '22 session log files found', score: '8/8' },
            { status: 'warn', text: 'Activity spans 11 days \u2014 14+ days earns full score', score: '5/8' },
            { status: 'pass', text: '22 sessions meets the minimum threshold', score: '5/5' },
            { status: 'pass', text: 'Most recent activity today', score: '4/4' },
          ]
        },
        {
          name: 'Review Loop', score: 4, max: 15,
          checks: [
            { status: 'fail', text: 'No quality-metrics.md found in brain-health/ or memory/', score: '0/6' },
            { status: 'fail', text: 'No growth-log.md found in brain-health/ or memory/', score: '0/5' },
            { status: 'pass', text: 'Pattern tracker has confidence levels and active counts', score: '4/4' },
          ]
        },
        {
          name: 'Brain Health Infra', score: 5, max: 10,
          checks: [
            { status: 'warn', text: 'Brain health tracked via memory patterns directory (fallback) \u2014 consider adding dedicated brain-health/ directory', score: '2/4' },
            { status: 'fail', text: 'No tracking files found (growth-log.md, quality-metrics.md, pattern-confidence.md)', score: '0/3' },
            { status: 'pass', text: 'Getting started guide found: README.md', score: '3/3' },
          ]
        },
        {
          name: 'Context Pressure', score: 7, max: 10,
          checks: [
            { status: 'pass', text: 'CLAUDE.md size within acceptable range', score: '3/3' },
            { status: 'warn', text: 'Knowledge file distribution could be more balanced', score: '2/4' },
            { status: 'pass', text: 'Context surface area is manageable', score: '2/3' },
          ]
        },
      ]
    },
    cerebellum: {
      name: 'Cerebellum',
      subtitle: 'Safety & Coordination',
      dimension: 'setup',
      score: 62,
      layers: [
        {
          name: 'Hooks Configuration', score: 16, max: 19,
          checks: [
            { status: 'pass', text: '8 hook(s) across 3 lifecycle event(s): SessionStart, PreToolUse, PostToolUse', score: '4/4' },
            { status: 'pass', text: 'Tool lifecycle hooks found: PreToolUse, PostToolUse', score: '3/3' },
            { status: 'pass', text: '7/7 referenced hook script(s) exist on disk', score: '3/3' },
            { status: 'warn', text: 'Validated 7 hook script(s) \u2014 Fragile patterns (4): grep used with strict mode without error guard', score: '1/3' },
            { status: 'pass', text: '8 command hook(s) \u2014 consider adding prompt/agent hooks', score: '2/3' },
            { status: 'pass', text: '7 hook(s) use matchers for targeted execution', score: '3/3' },
          ]
        },
        {
          name: 'Permissions Audit', score: 9, max: 12,
          checks: [
            { status: 'pass', text: 'Permissions configured without explicit mode \u2014 using defaults with allow/deny rules', score: '3/3' },
            { status: 'pass', text: 'No over-permissive rules detected', score: '3/3' },
            { status: 'pass', text: 'No deny rules configured', score: '3/3' },
            { status: 'fail', text: '19/371 patterns have invalid tool prefixes \u2014 these rules will never match', score: '0/3' },
          ]
        },
        {
          name: 'MCP Security', score: 4, max: 8,
          checks: [
            { status: 'fail', text: 'Plaintext secrets found in 1 file(s): ~/.claude.json \u2014 move secrets to environment variables', score: '0/3' },
            { status: 'pass', text: 'No project-level MCP server configs found', score: '2/2' },
            { status: 'pass', text: 'MCP config properly gitignored', score: '2/2' },
            { status: 'warn', text: '16 permission allow pattern(s) contain embedded API keys/tokens', score: '0/1' },
          ]
        },
        {
          name: 'Sandbox Configuration', score: 1, max: 8,
          checks: [
            { status: 'warn', text: 'No sandbox configuration found \u2014 commands run unsandboxed by default', score: '1/3' },
            { status: 'warn', text: 'No sandbox \u2014 network controls not configured', score: '0/2' },
            { status: 'warn', text: 'No sandbox configured \u2014 excluded commands check not applicable', score: '0/2' },
            { status: 'warn', text: 'No sandbox configured \u2014 auto-allow check not applicable', score: '0/1' },
          ]
        },
        {
          name: 'Gitignore Hygiene', score: 5, max: 6,
          checks: [
            { status: 'pass', text: '.env and local settings excluded from git', score: '3/3' },
            { status: 'pass', text: 'Sensitive config files protected', score: '2/3' },
          ]
        },
      ]
    },
    brainstem: {
      name: 'Brain Stem',
      subtitle: 'Core Infrastructure',
      dimension: 'setup',
      score: 84,
      layers: [
        {
          name: 'Config Hygiene', score: 3, max: 7,
          checks: [
            { status: 'fail', text: 'Config files total 1380 lines \u2014 likely contains stale or duplicate entries', score: '0/2' },
            { status: 'pass', text: 'No duplicate MCP servers between .mcp.json and ~/.claude.json', score: '2/2' },
            { status: 'fail', text: '353 permission patterns \u2014 config is accumulating unchecked permissions', score: '0/2' },
            { status: 'pass', text: 'Hooks defined in .claude/settings.json \u2014 shareable with team', score: '1/1' },
          ]
        },
        {
          name: 'Settings Hierarchy', score: 12, max: 12,
          checks: [
            { status: 'pass', text: '3 settings level(s) configured: project-shared, project-local, user-global', score: '4/4' },
            { status: 'pass', text: 'No shadowed settings detected across levels', score: '4/4' },
            { status: 'pass', text: 'Settings are placed in appropriate scopes', score: '4/4' },
          ]
        },
        {
          name: 'Environment Variables', score: 10, max: 10,
          checks: [
            { status: 'pass', text: '2 env file(s) present and .gitignore includes .env patterns', score: '4/4' },
            { status: 'pass', text: 'API keys configured through login or other mechanism', score: '3/3' },
            { status: 'pass', text: 'Using default performance settings', score: '3/3' },
          ]
        },
        {
          name: 'Model Configuration', score: 6, max: 8,
          checks: [
            { status: 'pass', text: 'Using default model \u2014 no explicit model configuration', score: '2/3' },
            { status: 'pass', text: 'No model aliases configured \u2014 using defaults', score: '2/3' },
            { status: 'pass', text: 'No effort level set \u2014 using default (high)', score: '2/2' },
          ]
        },
        {
          name: 'Plugin Coverage', score: 6, max: 6,
          checks: [
            { status: 'pass', text: '3 plugin(s) active', score: '3/3' },
            { status: 'pass', text: '3/6 recommended plugins installed (50% coverage)', score: '2/2' },
            { status: 'pass', text: 'Using official plugins', score: '1/1' },
          ]
        },
        {
          name: 'MCP Server Health', score: 10, max: 10,
          checks: [
            { status: 'pass', text: '12 MCP server(s) configured: filesystem, memory, hdw-linkedin, hubspot, stripe, postgresql, AIMI, supabase (+4 more)', score: '3/3' },
            { status: 'pass', text: '12 server(s) \u2014 all have valid configuration', score: '3/3' },
            { status: 'pass', text: 'Using default MCP timeout', score: '2/2' },
            { status: 'pass', text: 'No project-level MCP servers', score: '2/2' },
          ]
        },
        {
          name: 'Personalization Depth', score: 10, max: 10,
          checks: [
            { status: 'pass', text: 'Role/context section found with 183 characters of personalized content', score: '4/4' },
            { status: 'pass', text: '65 profession-specific skill(s): add-prospect, auto-learn, brain-health-reporting...', score: '3/3' },
            { status: 'pass', text: '31 agent configuration(s) found in .claude/agents/', score: '3/3' },
          ]
        },
        {
          name: 'Attribution & Display', score: 5, max: 6,
          checks: [
            { status: 'pass', text: 'Using default attribution settings', score: '2/2' },
            { status: 'pass', text: 'Using default display settings', score: '2/2' },
            { status: 'warn', text: 'Found plans/ directory but plansDirectory not set in settings', score: '1/2' },
          ]
        },
      ]
    }
  },

  fixes: [
    { title: 'Create quality-metrics.md in memory', impact: '+5% usage', time: '~5 min', region: 'occipital', remedy: 'Create memory/quality-metrics.md and log a dated entry after each work session.' },
    { title: 'Create growth-log.md in memory', impact: '+4% usage', time: '~5 min', region: 'occipital', remedy: 'Create memory/growth-log.md with dated entries tracking what your brain learned each week.' },
    { title: 'Activity spans multiple days', impact: '+3% usage', time: '~ongoing', region: 'occipital', remedy: 'Use your Second Brain across multiple days. Session diversity matters more than session count.' },
    { title: 'Add folder tree to CLAUDE.md', impact: '+2% setup', time: '~10 min', region: 'frontal', remedy: 'Add a directory overview section to CLAUDE.md showing your brain\'s folder structure.' },
    { title: 'Add tracking files', impact: '+2% setup', time: '~5 min', region: 'occipital', remedy: 'Create brain-health/growth-log.md and brain-health/quality-metrics.md to track evolution.' },
  ]
};

// TASK 9: Pattern descriptors
const patternDescriptors = {
  'Progressive Disclosure': 'Layered context loading',
  'Knowledge Files as RAM': 'Structured domain knowledge',
  'Hooks as Guardrails': 'Automated safety checks',
  'Three-Layer Memory': 'Episodic + semantic + working',
  'Compound Learning': 'Review loops & growth',
  'Self-Correction': 'Health monitoring & evolution',
  'Context Surfaces': 'MCP servers & plugins',
};

// Color helper
function scoreColor(score) {
  if (score >= 85) return { r: 34, g: 197, b: 94, bar: '#22c55e' };
  if (score >= 70) return { r: 234, g: 179, b: 8, bar: '#eab308' };
  if (score >= 50) return { r: 249, g: 115, b: 22, bar: '#f97316' };
  return { r: 239, g: 68, b: 68, bar: '#ef4444' };
}

// Set radial gradients per region based on score
function colorBrainRegions() {
  Object.keys(data.brainRegions).forEach(key => {
    const region = data.brainRegions[key];
    const c = scoreColor(region.score);
    const grad = document.getElementById('grad-' + key);
    if (!grad) return;
    const stops = grad.querySelectorAll('stop');
    stops[0].setAttribute('stop-color', `rgba(${c.r},${c.g},${c.b},0.4)`);
    stops[1].setAttribute('stop-color', `rgba(${c.r},${c.g},${c.b},0.08)`);
  });
}

// TASK 9: Render patterns with descriptors
function renderPatterns() {
  const wrap = document.getElementById('patternsContent');
  wrap.innerHTML = data.patterns.map(p => {
    const c = scoreColor(p.pct);
    const desc = patternDescriptors[p.name] || '';
    return `<div class="pattern-row">
      <div class="pattern-name-wrap">
        <div class="pattern-name">${p.name}</div>
        <div class="pattern-descriptor">${desc}</div>
      </div>
      <div class="pattern-bar-wrap"><div class="pattern-bar" style="width:0%;background:${c.bar};" data-width="${p.pct}%"></div></div>
      <div class="pattern-pct">${p.pct}%</div>
    </div>`;
  }).join('');
  requestAnimationFrame(() => {
    setTimeout(() => {
      wrap.querySelectorAll('.pattern-bar').forEach(bar => {
        bar.style.width = bar.dataset.width;
      });
    }, 100);
  });
}

// Render journey
function renderJourney() {
  const wrap = document.getElementById('journeyContent');
  const { stages, current } = data.journey;
  const currentIdx = stages.findIndex(s => s.id === current);

  wrap.innerHTML = '<div class="journey-stages">' + stages.map((s, i) => {
    const isCompleted = i < currentIdx;
    const isCurrent = i === currentIdx;
    const isFuture = i > currentIdx;
    const dotClass = isCompleted ? 'completed' : isCurrent ? 'current' : 'future';
    const lineClass = isCompleted ? 'completed' : isCurrent ? 'current' : '';
    const nameClass = isCompleted ? 'completed' : isCurrent ? 'current' : '';
    const descClass = isCurrent ? 'current' : '';
    const checkmark = isCompleted ? '<svg width="10" height="10" viewBox="0 0 10 10"><path d="M 2 5 L 4.5 7.5 L 8 3" fill="none" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>' : isCurrent ? '<svg width="10" height="10" viewBox="0 0 10 10"><circle cx="5" cy="5" r="3" fill="#fff"/></svg>' : '';

    return `<div class="journey-stage">
      <div class="journey-indicator">
        <div class="journey-dot ${dotClass}">${checkmark}</div>
        <div class="journey-line ${lineClass}"></div>
      </div>
      <div class="journey-content">
        <div class="journey-name ${nameClass}">${s.name}</div>
        <div class="journey-desc ${descClass}">${s.desc}</div>
      </div>
    </div>`;
  }).join('') + '</div>';
}

// Render fixes
function renderFixes() {
  const wrap = document.getElementById('fixesContent');
  wrap.innerHTML = data.fixes.map((f, i) => {
    return `<div class="fix-row" data-region="${f.region}">
      <div class="fix-top">
        <span class="fix-num">${i + 1}.</span>
        <span class="fix-title">${f.title}</span>
        <div class="fix-meta">
          <span class="fix-region-tag">${f.region}</span>
          <span class="fix-impact">${f.impact}</span>
          <span class="fix-time">${f.time}</span>
        </div>
      </div>
      <div class="fix-remedy">${f.remedy}</div>
    </div>`;
  }).join('');

  wrap.querySelectorAll('.fix-row').forEach(row => {
    row.addEventListener('click', () => {
      const regionKey = row.dataset.region;
      flashRegion(regionKey);
      showRegionDetail(regionKey);
    });
  });
}

// TASK 2: Render priority fix
function renderPriorityFix() {
  const fix = data.fixes[0];
  if (!fix) return;
  const section = document.getElementById('priorityFixSection');
  section.innerHTML = `<div class="priority-fix-card">
    <div class="priority-fix-label">PRIORITY FIX</div>
    <div class="priority-fix-title">
      ${fix.title}
      <span class="fix-region-tag">${fix.region}</span>
      <span class="fix-impact">${fix.impact}</span>
      <span class="fix-time">${fix.time}</span>
    </div>
    <div class="priority-fix-remedy">${fix.remedy}</div>
  </div>`;
}

// Flash a brain region
function flashRegion(regionKey) {
  document.querySelectorAll(`.brain-region[data-region="${regionKey}"]`).forEach(el => {
    el.classList.remove('flash');
    void el.offsetWidth;
    el.classList.add('flash');
  });
}

// Show region detail
function showRegionDetail(regionKey) {
  const region = data.brainRegions[regionKey];
  if (!region) return;
  const c = scoreColor(region.score);
  const narrative = data.narratives[region.dimension] || '';
  const detailEl = document.getElementById('detailContent');

  // Make sure we're showing detail view, not all-checks view
  detailEl.style.display = '';
  document.getElementById('allChecksContent').style.display = 'none';
  const toggleBtn = document.getElementById('viewAllBtn');
  toggleBtn.textContent = 'View all 38 checks \u2192';

  // Build layers HTML
  const layersHtml = region.layers.map(l => {
    const pct = Math.round((l.score / l.max) * 100);
    const lc = scoreColor(pct);
    const checksHtml = l.checks.map(ch => {
      return `<div class="check-row">
        <div class="check-status ${ch.status}"></div>
        <div class="check-text">${ch.text}</div>
        <div class="check-score">${ch.score}</div>
      </div>`;
    }).join('');

    return `<div class="layer-section">
      <div class="layer-header">
        <span class="layer-name">${l.name}</span>
        <span class="layer-score-text" style="color:${lc.bar}">${l.score}/${l.max}</span>
      </div>
      <div class="layer-bar-outer">
        <div class="layer-bar-fill" style="width:${pct}%;background:${lc.bar};"></div>
      </div>
      ${checksHtml}
    </div>`;
  }).join('');

  detailEl.innerHTML = `
    <div class="detail-header">
      <div class="detail-header-info">
        <div class="detail-subtitle">${region.subtitle}</div>
        <div class="detail-title">${region.name}</div>
        <span class="dimension-badge ${region.dimension}">${region.dimension}</span>
      </div>
      <div class="detail-header-score">
        <div class="detail-score-big" style="color:${c.bar}">${region.score}</div>
      </div>
    </div>
    <div class="detail-narrative">${narrative}</div>
    ${layersHtml}
  `;

  // Highlight active region in SVG
  document.querySelectorAll('.brain-region').forEach(el => {
    el.classList.toggle('active', el.dataset.region === regionKey);
  });

  // Scroll detail card into view if needed
  document.getElementById('detailCard').scrollTo({ top: 0, behavior: 'smooth' });
}

// TASK 5: Toggle all checks table
function toggleAllChecks() {
  const detailEl = document.getElementById('detailContent');
  const allChecksEl = document.getElementById('allChecksContent');
  const toggleBtn = document.getElementById('viewAllBtn');

  if (allChecksEl.style.display === 'none') {
    // Show all checks
    detailEl.style.display = 'none';
    allChecksEl.style.display = '';
    toggleBtn.innerHTML = '&larr; Back to brain view';

    // Build all checks table
    const allChecks = [];
    Object.keys(data.brainRegions).forEach(regionKey => {
      const region = data.brainRegions[regionKey];
      region.layers.forEach(layer => {
        layer.checks.forEach(check => {
          allChecks.push({
            layerName: layer.name,
            text: check.text,
            status: check.status,
            score: check.score,
            sortOrder: check.status === 'fail' ? 0 : check.status === 'warn' ? 1 : 2
          });
        });
      });
    });

    // Sort: fails first, warns second, passes last
    allChecks.sort((a, b) => a.sortOrder - b.sortOrder);

    const statusDotColor = { pass: 'var(--green)', warn: 'var(--yellow)', fail: 'var(--red)' };

    allChecksEl.innerHTML = `<div class="all-checks-wrap">
      <table class="all-checks-table">
        <thead>
          <tr>
            <th style="width:20px"></th>
            <th>Layer</th>
            <th>Check</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody>
          ${allChecks.map(c => `<tr>
            <td><span class="table-status-dot" style="background:${statusDotColor[c.status]}"></span></td>
            <td class="layer-name-cell">${c.layerName}</td>
            <td class="check-text-cell">${c.text}</td>
            <td>${c.score}</td>
          </tr>`).join('')}
        </tbody>
      </table>
    </div>`;
  } else {
    // Back to brain view
    detailEl.style.display = '';
    allChecksEl.style.display = 'none';
    toggleBtn.innerHTML = 'View all 38 checks &rarr;';
  }
}

// Brain hover interactions
function setupBrainInteractions() {
  const tooltip = document.getElementById('brainTooltip');
  const wrap = document.getElementById('brainWrap');

  document.querySelectorAll('.brain-region').forEach(el => {
    el.addEventListener('mouseenter', (e) => {
      const regionKey = el.dataset.region;
      const region = data.brainRegions[regionKey];
      if (!region) return;
      tooltip.querySelector('.tt-name').textContent = region.name;
      tooltip.querySelector('.tt-score').textContent = `${region.score}% \u2014 ${region.subtitle}`;
      tooltip.classList.add('visible');
    });

    el.addEventListener('mousemove', (e) => {
      const rect = wrap.getBoundingClientRect();
      const x = e.clientX - rect.left + 16;
      const y = e.clientY - rect.top - 10;
      tooltip.style.left = x + 'px';
      tooltip.style.top = y + 'px';
    });

    el.addEventListener('mouseleave', () => {
      tooltip.classList.remove('visible');
    });

    el.addEventListener('click', () => {
      const regionKey = el.dataset.region;
      showRegionDetail(regionKey);
    });
  });
}

// Animate progress rings
function animateRings() {
  document.querySelectorAll('.ring-progress').forEach(ring => {
    const pct = parseFloat(ring.dataset.pct);
    const circumference = 251.3;
    const offset = circumference - (circumference * pct / 100);
    setTimeout(() => {
      ring.style.transition = 'stroke-dashoffset 1s cubic-bezier(0.22, 1, 0.36, 1)';
      ring.style.strokeDashoffset = offset;
    }, 200);
  });
}

// TASK 8: Share button interactions
function setupShareButton() {
  const btn = document.getElementById('shareBtn');
  const dropdown = document.getElementById('shareDropdown');
  const copyBtn = document.getElementById('copyLinkBtn');
  const pdfBtn = document.getElementById('savePdfBtn');

  btn.addEventListener('click', (e) => {
    e.stopPropagation();
    dropdown.classList.toggle('open');
  });

  document.addEventListener('click', () => {
    dropdown.classList.remove('open');
  });

  dropdown.addEventListener('click', (e) => {
    e.stopPropagation();
  });

  copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(window.location.href).then(() => {
      const label = copyBtn.querySelector('span');
      label.textContent = 'Copied!';
      setTimeout(() => { label.textContent = 'Copy Link'; }, 1500);
    });
    dropdown.classList.remove('open');
  });

  pdfBtn.addEventListener('click', () => {
    dropdown.classList.remove('open');
    window.print();
  });
}

// Init
colorBrainRegions();
renderPatterns();
renderJourney();
renderFixes();
renderPriorityFix();
setupBrainInteractions();
setupShareButton();

// TASK 6: Animate rings on scroll with IntersectionObserver
const bentoGrid = document.querySelector('.bento');
const ringObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      animateRings();
      ringObserver.unobserve(entry.target);
    }
  });
}, { threshold: 0.3 });
ringObserver.observe(bentoGrid);

// Show frontal by default so the detail panel is not empty
showRegionDetail('frontal');
</script>
</body>
</html>
